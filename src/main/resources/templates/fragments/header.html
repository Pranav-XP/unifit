<!-- header.html -->
<header class="fixed z-10 top-0 w-full" xmlns:sec="http://www.thymeleaf.org">
  <nav class="flex items-center justify-between w-full p-5 bg-blue-600 border-b-2 border-blue-900">
    <a th:href="@{/}">
      <h1 class="text-4xl lg:text-5xl font-extrabold text-white flex items-center gap-4">
        UniFit<i class="w-16 h-16" data-lucide="graduation-cap"></i>
        <script src="https://unpkg.com/lucide@latest"></script>
        <script> lucide.createIcons(); </script>
      </h1>
    </a>

    <!-- Desktop Menu -->
    <ul class="hidden lg:flex gap-7 text-lg" sec:authorize="isAuthenticated()">
      <li class="text-white font-semibold hover:underline"><a th:href="@{/facilities}">Facilities</a></li>
      <li class="text-white font-semibold hover:underline"><a th:href="@{/booking}">Book</a></li>
      <li class="text-white font-semibold hover:underline"><a th:href="@{/user}">Profile</a></li>
      <li sec:authorize="hasRole('ROLE_ADMIN')" class="text-white font-semibold hover:underline"><a th:href="@{/admin}">Dashboard</a></li>
      <li class="text-white font-semibold hover:underline"><a th:href="@{/logout}">Logout</a></li>
    </ul>

    <ul class="hidden lg:flex gap-7 text-lg" sec:authorize="!isAuthenticated()">
      <li class="text-white font-semibold hover:underline"><a th:href="@{/facilities}">Facilities</a></li>
      <li class="text-white font-semibold hover:underline"><a th:href="@{/registration}">Register</a></li>
      <li class="text-white font-semibold hover:underline"><a th:href="@{/login}">Login</a></li>
    </ul>

    <!-- Mobile Menu Toggle Button -->
    <div class="lg:hidden flex items-center">
      <button class="text-white hover:text-gray-300 focus:outline-none" id="mobile-menu-button">☰</button>
    </div>
  </nav>

  <!-- Mobile Sidebar Menu -->
  <div id="mobile-sidebar" class="lg:hidden fixed inset-y-0 left-0 bg-blue-700 text-white transform -translate-x-full transition-transform duration-300 ease-in-out hidden w-64 z-50">
    <div class="flex justify-end p-5">
      <button class="text-white hover:text-gray-300 focus:outline-none" id="close-mobile-sidebar">✕</button>
    </div>
    <ul class="p-5 text-lg flex flex-col gap-3">
      <li class="hover:underline"><a th:href="@{/facilities}">Facilities</a></li>
      <li sec:authorize="isAuthenticated()" class="hover:underline"><a th:href="@{/booking}">Bookings</a></li>
      <li sec:authorize="isAuthenticated()" class="hover:underline"><a th:href="@{/user}">Profile</a></li>
      <li sec:authorize="hasRole('ROLE_ADMIN')" class="hover:underline"><a th:href="@{/admin}">Dashboard</a></li>
      <li sec:authorize="hasRole('ROLE_ADMIN')" class="hover:underline"><a th:href="@{/admin/users}">Manage Bookings</a></li>
      <li sec:authorize="hasRole('ROLE_ADMIN')" class="hover:underline"><a th:href="@{/admin/maintenance}">Maintenance</a></li>
      <li sec:authorize="hasRole('ROLE_ADMIN')" class="hover:underline"><a th:href="@{/admin/facilities}">Manage Facilities</a></li>
      <li sec:authorize="hasRole('ROLE_ADMIN')" class="hover:underline"><a th:href="@{/admin/events}">Manage Events</a></li>
      <li sec:authorize="hasRole('ROLE_ADMIN')" class="hover:underline"><a th:href="@{/admin/reports}">View Report</a></li>
      <li sec:authorize="isAuthenticated()" class="hover:underline"><a th:href="@{/logout}">Logout</a></li>
      <li sec:authorize="!isAuthenticated()" class="hover:underline"><a th:href="@{/registration}">Register</a></li>
      <li sec:authorize="!isAuthenticated()" class="hover:underline"><a th:href="@{/login}">Login</a></li>
    </ul>
  </div>

  <script>
    // JavaScript to toggle mobile sidebar visibility
    document.getElementById("mobile-menu-button").addEventListener("click", function () {
      const sidebar = document.getElementById("mobile-sidebar");
      sidebar.classList.remove("hidden");
      setTimeout(() => sidebar.classList.remove("-translate-x-full"), 0);
    });

    document.getElementById("close-mobile-sidebar").addEventListener("click", function () {
      const sidebar = document.getElementById("mobile-sidebar");
      sidebar.classList.add("-translate-x-full");
      setTimeout(() => sidebar.classList.add("hidden"), 300);
    });
  </script>
</header>
